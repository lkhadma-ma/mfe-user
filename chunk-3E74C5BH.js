import{a as w,b as g,c as i}from"./chunk-2VMXMS7J.js";import{runInInjectionContext as L}from"@angular/core";var E="__NATIVE_FEDERATION__",I=globalThis;I[E]??={externals:new Map,remoteNamesToRemote:new Map,baseUrlToRemoteNames:new Map};var f=I[E],R=f.externals;function b(e){return`${e.packageName}@${e.version}`}function M(e){let t=b(e);return R.get(t)}function P(e,t){let o=b(e);R.set(o,t)}var N=f.remoteNamesToRemote,d=f.baseUrlToRemoteNames;function j(e,t){N.set(e,t),d.set(t.baseUrl,e)}function k(e){return d.get(e)}function F(e){return d.has(e)}function A(e){return N.get(e)}function O(e){document.head.appendChild(Object.assign(document.createElement("script"),{type:"importmap-shim",innerHTML:JSON.stringify(e)}))}function p(e){let t=e.split("/");return t.pop(),t.join("/")}function l(e,t){for(;e.endsWith("/");)e=e.substring(0,e.length-1);return t.startsWith("./")&&(t=t.substring(2,t.length)),`${e}/${t}`}var v=(function(e){return e.COMPLETED="federation-rebuild-complete",e.ERROR="federation-rebuild-error",e})(v||{});function $(e){let t=new EventSource(e);t.onmessage=function(o){JSON.parse(o.data).type===v.COMPLETED&&(console.log("[Federation] Rebuild completed, reloading..."),window.location.reload())},t.onerror=function(o){console.warn("[Federation] SSE connection error:",o)}}function _(e,t){return i(this,null,function*(){let o=p(e),n=yield C(e);t||(t=n.name),n.buildNotificationsEndpoint&&$(o+n.buildNotificationsEndpoint);let r=U(n,t,o);return j(t,g(w({},n),{baseUrl:o})),r})}function U(e,t,o){let n=z(e,t,o),r=D(e,o);return{imports:n,scopes:r}}function C(e){return i(this,null,function*(){return yield fetch(e).then(o=>o.json())})}function D(e,t){let o={},n={};for(let r of e.shared){let s=M(r)??l(t,r.outFileName);P(r,s),n[r.packageName]=s}return o[t+"/"]=n,o}function z(e,t,o){let n={};for(let r of e.exposes){let s=l(t,r.key),a=l(o,r.outFileName);n[s]=a}return n}function x(e,t){return i(this,null,function*(){let o=H(e,t);yield W(o);let n=V(o),r=A(n),s=o.fallback,a=r?"":"unknown remote "+n;if(!r&&!s)throw new Error(a);if(!r)return y(a),Promise.resolve(s);let u=r.exposes.find(m=>m.key===o.exposedModule),h=u?"":`Unknown exposed module ${o.exposedModule} in remote ${n}`;if(!u&&!s)throw new Error(h);if(!u)return y(h),Promise.resolve(s);let T=l(r.baseUrl,u.outFileName);try{return K(T)}catch(m){if(s)return console.error("error loading remote module",m),s;throw m}})}function K(e){return typeof importShim<"u"?importShim(e):import(e)}function V(e){let t;if(e.remoteName)t=e.remoteName;else if(e.remoteEntry){let o=p(e.remoteEntry);t=k(o)}else throw new Error("unexpcted arguments: Please pass remoteName or remoteEntry");if(!t)throw new Error("unknown remoteName "+t);return t}function W(e){return i(this,null,function*(){if(e.remoteEntry&&!F(p(e.remoteEntry))){let t=yield _(e.remoteEntry);O(t)}})}function H(e,t){let o;if(typeof e=="string"&&t)o={remoteName:e,exposedModule:t};else if(typeof e=="object"&&!t)o=e;else throw new Error("unexpected arguments: please pass options or a remoteName/exposedModule-pair");return o}function y(e){typeof window<"u"&&console.error(e)}import*as c from"@angular/core";var S=class e{constructor(t){this.injector=t}remote;readyPromise;initRemote(){return this.readyPromise||(this.readyPromise=i(this,null,function*(){let t=yield x({remoteName:"auth",exposedModule:"./AuthService"});return this.remote=L(this.injector,()=>new t.AuthService),this.remote})),this.readyPromise}authorizationHeader(t=200,o=10){return i(this,null,function*(){let n=yield this.initRemote(),r,s=0;do{if(r=yield n.authorizationHeader(),r)break;if(s++,s>=o)throw new Error("Auth header not ready after max retries");yield new Promise(a=>setTimeout(a,t))}while(!r);return r})}getUser$(){return i(this,null,function*(){return(yield this.initRemote()).user$})}logout(){return i(this,null,function*(){return(yield this.initRemote()).logout()})}static \u0275fac=function(o){return new(o||e)(c.\u0275\u0275inject(c.EnvironmentInjector))};static \u0275prov=c.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})};export{S as a};
